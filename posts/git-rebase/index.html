<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Git rebase</title><style>html body{font-family:'',sans-serif;background-color:#fff}:root{--accent:brown;--border-width:5px}</style><link rel=stylesheet href=https://techinfo.gerull.nl/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family="><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/zsh.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script>$(document).on("click",function(){$(".collapse").collapse("hide")})</script><meta name=generator content="Hugo 0.111.3"><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Git rebase</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/posts/>Home</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about/>About</a></li></ul></div></div></nav><main><div><h2>Git rebase</h2><h5>A brief description how to simplyfy Git merge operations.</h5><a href=https://techinfo.gerull.nltags/git><kbd class=item-tag>git</kbd></a></div><div align=start class=content><p>The git rebase command is one of the more powerfull and advanced commands. You can use it to avoid overly complex merge operations. The common practice in Git is to do lot&rsquo;s of small commit&rsquo;s. But when your code builds fine and you don&rsquo;t need that detailed piece of history anymore, you can compact these small commits into one or two big commits.</p><p>The ultimate source and authority on all Git commands is <a href=https://git-scm.com/book/en/v2><em>Pro Git</em></a> the Git book.</p><h2 id=rebase-before-merge>Rebase before merge</h2><p>A good practice is to always rebase before a merge. Git will produce a more comprehensive timeline. Especiallyt with with larger branches it will make it easier to fast forward.
What you do with rebase is to move your point in time where you branched. The less changes are on the timeline you want to merge (back) to, the chance of conflicts you have.</p><h3 id=rebase-to-simplify-merging>Rebase to simplify merging</h3><p>We have a master and one branch b1. After adding a third file and some content you needed to go back to master for some other work.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git lg
</span></span><span style=display:flex><span>* 6350dfa <span style=color:#f92672>(</span>HEAD, master<span style=color:#f92672>)</span> Add fourish content
</span></span><span style=display:flex><span>* 217709e Add fourth file.
</span></span><span style=display:flex><span>| * f20dfb3 <span style=color:#f92672>(</span>b1<span style=color:#f92672>)</span> Add more content
</span></span><span style=display:flex><span>| * 2e5d2df Add third file.
</span></span><span style=display:flex><span>|/  
</span></span><span style=display:flex><span>* df37868 Add second file
</span></span><span style=display:flex><span>* fd37cc9 Initial commit.
</span></span></code></pre></div><p>If you merge b1 now into the master you end up with a hump in your history line. That is, of course, the historical correct representation. But in practice lot&rsquo;s these little bumps make your timeline harder to understand. As we have made changes to different files, the order doesn&rsquo;t really matter. (As long as you no major change to dependencies between those files.)
To rewrite history and straighten your timeline, checkout branch b1 first.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git checkout b1
</span></span><span style=display:flex><span>$ git lg
</span></span><span style=display:flex><span>* 6350dfa <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span> Add fourish content
</span></span><span style=display:flex><span>* 217709e Add fourth file.
</span></span><span style=display:flex><span>| * f20dfb3 <span style=color:#f92672>(</span>HEAD, b1<span style=color:#f92672>)</span> Add more content
</span></span><span style=display:flex><span>| * 2e5d2df Add third file.
</span></span><span style=display:flex><span>|/  
</span></span><span style=display:flex><span>* df37868 Add second file
</span></span><span style=display:flex><span>* fd37cc9 Initial commit.
</span></span></code></pre></div><p>Now execute the rebase command. What this command actually does goes as follow.
First the changes are save to a temporare place. The commit df37868 is checked out. Now Git applies the commits 217709e and 6350dfa. At last the saved changes 2e5d2df and f20dfb3 are applied.
The repository contains the same changes, but looks a lot clearer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git rebase master
</span></span><span style=display:flex><span>First, rewinding head to replay your work on top of it...
</span></span><span style=display:flex><span>Applying: Add third file.
</span></span><span style=display:flex><span>Applying: Add more content
</span></span><span style=display:flex><span>$ git lg
</span></span><span style=display:flex><span>* de27624 <span style=color:#f92672>(</span>HEAD, b1<span style=color:#f92672>)</span> Add more content
</span></span><span style=display:flex><span>* 39dde4e Add third file.
</span></span><span style=display:flex><span>* 6350dfa <span style=color:#f92672>(</span>master<span style=color:#f92672>)</span> Add fourish content
</span></span><span style=display:flex><span>* 217709e Add fourth file.
</span></span><span style=display:flex><span>* df37868 Add second file
</span></span><span style=display:flex><span>* fd37cc9 Initial
</span></span></code></pre></div><p>This is a very simple example. More complex scenarios are in Pro Git. Just imagine working on new features but get interupted by a couple of changes / fixes to the latest release.</p><h2 id=rebase-on-pull>Rebase on pull</h2><p>To simplify the incorporation of changes from your team use git pull &ndash;rebase for every pull you made. Git will automatically check if can rebase the changes and keep your history simple.</p><p>Make your life easier and put this command in your config file.
git config &ndash;global pull.rebase true.</p><h2 id=dont-mess-with-time>Don&rsquo;t mess with time</h2><p>As convenient as rebase is, you are changing local history. When the commits your are moving on the timeline only exist in your local repository nothing bad happens.
But if you try to rebase commits that are already pushed to upstream repositories you probably get in trouble. The Pro Git book is quite elaborate on these cases and the documentation to read if you want to dive deeper into rebasing.</p></div></main><footer><p class="copyright text-muted">Â© 2022 C. Gerull All rights reserved.</p></footer></body></html>